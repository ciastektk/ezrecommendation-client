<script>
    {% autoescape 'js' %}

    (function () {
        const recommendationItems = document.querySelectorAll('a[data-recommendation-ping-api]');
        const ezRecommendationClient = new EzRecommendationClient();

        recommendationItems.forEach(item => {
            item.addEventListener('click', event => {
                const url = event.currentTarget.dataset.recommendationPingApi;

                if (url && top === self) {
                    ezRecommendationClient.ping(url);
                }
            });
        });
    })();
    {% endautoescape %}
</script>
